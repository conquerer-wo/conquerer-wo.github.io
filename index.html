const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      // If it's an h1.animate, remove it
      if (entry.target.tagName.toLowerCase() === 'h1') {
        entry.target.remove();
        observer.unobserve(entry.target);
        return;
      }

      entry.target.classList.add('show', 'fade-out');

      setTimeout(() => {
        entry.target.classList.add('one');

        if (entry.target.classList.contains('one')) {
          entry.target.classList.remove('fade-out');

          // Create replacement div
          const replacement = document.createElement('div');
          replacement.className = 'replacement';
          replacement.innerHTML = `
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; align-items: center; gap: 90px;">
              <img src="https://upload.wikimedia.org/wikipedia/en/0/06/FA_Euro_logo.svg" style="width: 100px;">
              <h1>FUTURE LEGEND</h1>
              <img style="margin-left:90px" class="p" src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/MLS_Next_logo.svg/1200px-MLS_Next_logo.svg.png" style="width: 100px;">
            </div>
          `;

          entry.target.replaceWith(replacement);
          observer.unobserve(entry.target);
        }
      }, 4400);
    }
  });
}, { threshold: 0 });

const elements = document.querySelectorAll('.animate');
elements.forEach(element => observer.observe(element));
